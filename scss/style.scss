@use 'base' as *;
@use 'pages' as *;
@use 'vendors' as *;

// -----------------------------------------

html {
  font-family: 'WDXL Lubrifont JP N', sans-serif;
  font-weight: 400;
  font-style: normal;
}

body {
  background-color: rgb(162, 235, 235);

  // --------------------------------------------

  h1 {
    text-align: center;
    margin-block-start: 2rem;
    margin-block-end: 50px 5px; // h2との間隔を詰める
  }

  #today {
    text-align: center;
    margin-block-start: 0;
    margin-block-end: 30px; //today-wrapとの間にスペース
  }

  // ニュース
  .news-article-wrap {
    display: flex;
    flex-direction: column;
    // flex: 2; //広い画面での比率を明示的に定義
  }

  .today-wrap {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    margin: 0 auto;
    max-width: 1200px; //コンテンツ幅を制限して中央に配置
    padding-inline: 20px;

    @media (max-width: 500px) {
      flex-direction: column;
      /* 縦並びになった際に、横幅いっぱいに広がるよう調整 */
      .news-article-wrap,
      #pokemon-info-container {
        width: 100%;
        // flex: 0 0 auto;
      }
    }

    // ニュース記事部分のデザイン
    #news-container {
      display: flex;
      flex-direction: column;
      gap: 20px;

      position: relative; //疑似要素の基準にする
      background-color: #f7f7f7;
      border-radius: 15px;
      padding: 15px 20px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); //影
      border: 1px solid #e0e0e0;
      margin-block-end: 15px;
      //右側のポケモンへ向かって吹き出すための余白調整
      // margin-inline-end: 15px;
      margin-inline-end: 0;
    }

    //ニュース記事コンテナの左上に画像を配置する疑似要素
    #news-container::before {
      content: ''; /* 疑似要素には content が必須 */
      position: absolute;

      //配置を左上に指定
      top: -12px; //境界線より上に少し出す
      left: 0; //左端から少し内側に入れる

      width: 30px;
      height: 30px;

      background-image: url('/images/monsterball01.png');
      background-size: cover; //画像をボックスいっぱいに表示
      background-repeat: no-repeat;

      //吹き出しの線の上に表示されるように z-index を設定
      z-index: 10;
    }

    // 吹き出しの「しっぽ」（右下に向けて）
    #news-container::after {
      content: '';
      position: absolute;
      top: 50%; //縦方向の中心に配置
      right: -8.5px; //ニュースコンテナの右外側に配置
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 10px 0 10px 10px; //太さ設定
      border-color: transparent transparent transparent #f7f7f7; //透明、透明、透明、背景色
      transform: translateY(-50%); //縦方向の位置を調整

      @media (max-width: 500px) {
        content: '';
        //位置のリセットと設定
        top: auto; //既存の top: 50%; をリセット
        bottom: -10px; //下部外側に配置
        right: auto; //既存の right: -8.5px; をリセット
        left: 50%; //親要素の幅の中央に配置

        //トライアングルの向きと色を変更
        border-width: 10px 10px 0 10px;
        border-color: #f7f7f7 transparent transparent transparent;
        //背景色, 透明, 透明, 透明 -> 上（下部中央）に突き出す向きに

        //中央揃えの微調整
        transform: translateX(
          -50%
        ); //left: 50% で左端が中央に来た分、幅の半分だけ左に戻す
      }
    }

    // ポケモン部分のデザイン
    #pokemon-info-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      // flex: 1;
      text-align: center;
    }

    #pokemon-image {
      //輪郭に沿った切り抜きに近い、円形の切り抜き
      width: 250px;
      height: 250px; //正方形に
    }

    #pokemon-name {
      margin-block-start: 10px;
    }
  }

  // ラッキーカラー
  #luckyColor {
    text-align: center;
    margin-block-start: 100px;
    margin-block-end: 30px;
    font-size: 2rem;
    color: #2c3e50;
  }

  .lucky-color-section-wrapper {
    text-align: center;
    /* 浮かび上がるカードデザイン */
    max-width: 500px; //幅を制限して中央に集める
    margin: 0 auto; //中央配置（水平）
    padding: 30px;
    background-color: #ffffff;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); //濃い影
    border: 1px solid #eee;
  }

  .button-wrap {
    display: flex;
    justify-content: center;

    #colorBtn {
      display: block;
      padding-block: 1.2rem;
      padding-inline: 3rem;
      border-radius: 3rem;
      color: white;
      background-color: rgb(175, 228, 128);
      border: none;
      cursor: pointer;
      /* 立体的な影 */
      box-shadow: 0 5px 0 0 rgb(60, 110, 30);
      transition: all 0.1s;
    }

    #colorBtn:hover {
      color: white;
      background-color: rgb(98, 182, 105); //ホバーで色を反転
    }

    #colorBtn:active {
      /* クリック時の押し込みエフェクト */
      transform: translateY(5px);
      box-shadow: 0 0 0 0 rgb(60, 110, 30);
    }
  }

  // ラッキーカラーの結果表示のデザイン
  #display-color {
    display: none; //初期状態を非表示にしておく
    visibility: hidden; //念の為追加

    text-align: center;
    font-size: 1.5rem;
    font-weight: bold;
    margin-block: 30px;
    color: #333;

    //背景デザイン
    background-color: #f4f4f4;
    padding: 15px 30px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); //影
    border: 2px solid #ddd;
    display: inline-block; //padding効かせたいからブロック要素に変更
  }

  .is-visible {
    display: inline-block !important; //display: none を上書きし、中央寄せも維持
    visibility: visible !important;
  }

  //色の文字を囲む部分
  .color-highlight {
    //このクラスは文字色を設定するためにJavaScriptで追加する
    font-size: 1.8rem; //ラッキーカラー部分だけ少し大きく
    font-weight: 900; //さらに太く
    padding-inline: 5px;
    margin-inline: 3px;
  }

  // ラッキーカラーポケモンの画像デザイン
  #pokeColor-results {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin-block-start: 30px;
  }

  // 個別デザイン
  .pokemon-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;

    // 全体の固定サイズ
    width: 250px;
  }

  // ポケモン画像img
  .pokemon-card img {
    width: 200px;
    height: 200px;
    border-radius: 50%;
    object-fit: cover; //画像をトリミングして、指定したサイズ内に収める
    // object-fit: contain; // 画像全体を表示するが、余白ができる可能性がある
    border: 4px solid #c1bebe;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); //影
    margin-block-start: 50px;
    margin-block-end: 10px;
    padding: 15px;
    background-color: #ffffff;
  }

  //アニメーション用CSS
  //アニメーション中に表示される画像全体を覆うプレースホルダー
  #animation-placeholder {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 200px; //アニメーション中の高さを確保
    margin-block: 20px;
  }

  #animation-placeholder img {
    max-width: 100%;
    max-height: 100%;
    transition: opacity 0.3s ease-in-out; //画像切り替え時のフェードイン・アウト
  }

  //弾けるアニメーションの定義
  @keyframes burst-effect {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.5); //瞬間的に拡大
      opacity: 0.5;
    }
    100% {
      transform: scale(0); // 瞬間的に縮小・消滅
      opacity: 0;
    }
  }

  //火花が四方に広がるエフェクト
  @keyframes spark-burst {
    0% {
      width: 0;
      height: 0;
      opacity: 1;
      box-shadow: 0 0 0 0 gold, 0 0 0 0 gold, 0 0 0 0 orange, 0 0 0 0 red;
    }
    100% {
      //異なる方向に、異なる色・距離で火花を飛ばす
      box-shadow: 50px 50px 8px gold,
        /* 右下（大きく、濃い） */ -70px -70px 6px #ffeb3b,
        /* 左上（より遠く、少し明るい黄色） */ 80px -20px 7px orange,
        /* 右上（遠く、大きめ） */ -30px 60px 5px red,
        /* 左下（少し近く、赤みを強調） */ 40px 0 4px yellow; /* ★ 追加：右中央に小さな粒を飛ばす */
      opacity: 0;
      transform: scale(1.5);
    }
  }

  //弾けるエフェクトを適用するクラス
  .bursting {
    animation: burst-effect 0.5s forwards; //0.5秒でアニメーションを実行し、終了状態を維持
    position: relative; //擬似要素の基準にする
  }

  //変更: 画像要素(#anim-img)に消滅アニメーションを適用する
  .bursting #anim-img {
    animation: burst-effect 0.5s forwards; //0.5秒でアニメーションを実行し、終了状態を維持
  }

  //弾ける火花本体
  .bursting::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 10px;
    height: 10px;
    //画像が消えるタイミングに合わせて火花を発生させる
    animation: spark-burst 0.5s forwards;

    //初期色（火花の中心）
    background-color: white;
    border-radius: 50%;
    z-index: 10;
  }

  #to-top-btn {
    //画面の右下に固定配置
    position: fixed;
    bottom: 20px;
    right: 20px;

    display: none; //初期状態では非表示
    width: 50px;
    height: 50px;
    background-color: #e74c3c;
    color: white;
    text-align: center;
    line-height: 50px; //文字を垂直中央に
    font-size: 1.5rem;
    border-radius: 50%;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); // 影
    text-decoration: none;
    z-index: 1000; //他の要素の上に表示
    cursor: pointer;
    transition: opacity 0.3s;
  }

  #to-top-btn:hover {
    background-color: #c0392b; //ホバーで少し暗く
  }
}
